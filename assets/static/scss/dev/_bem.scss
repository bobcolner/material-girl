// #### SASS Style guide: ####
// * Avoid over-nesting (result in over-specific selectors. 
//      -Highly coupled to html structure
// * Avoid style inheratience i.e. @extends.
//      - results in numerous style small style classs to style each html element.
// * using placeholders can help
//      - Use extend from within a module, not across different modules.
//      - Use extend on placeholders exclusively, not on actual selectors.

// #### Files: ####
// Base: materalizecss
// Layout: 
// Modules: 
// Theme: 

// BEM: http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/
// BEM macros: https://medium.com/@marcmintel/pushing-bem-to-the-next-level-with-sass-3-4-5239d2371321

// BEM pattern macros:
$elementSeparator: '__';
$modifierSeparator: '--';

@function containsModifier($selector) {
    $selector: selectorToString($selector);
    @if str-index($selector, $modifierSeparator) {
        @return true;
    } @else {
        @return false;
    }
}

@function selectorToString($selector) {
    $selector: inspect($selector); //cast to string
    $selector: str-slice($selector, 2, -2); //remove brackets
    @return $selector;
}

@function getBlock($selector) {
    $selector: selectorToString($selector);
    $modifierStart: str-index($selector, $modifierSeparator) - 1;
    @return str-slice($selector, 0, $modifierStart);
}

@mixin base($block) {
    .#{$block} {
        @content;
    }
}

@mixin element($element) {
    $selector: &;
    @if containsModifier($selector) {
        $block: getBlock($selector);
        @at-root {
            #{$selector} {
                #{$block+$elementSeparator+$element} {
                    @content;
                }
            }
        }
    } @else {
        @at-root {
            #{$selector+$elementSeparator+$element} {
                @content;
            }
        }
    }
}

@mixin modifier($modifier) {
    @at-root {
        #{&}#{$modifierSeparator+$modifier} {
            @content;
        }
    }
}
// TEst
@include base(building) {
    background-color: #6BD9ED;
    padding: 15px;
    height: 500px;
    @include modifier(brick) {        
        background-color: red;        
    }
    @include element(roof) {
        background-color: grey;
        font-size: 34px;
        position: relative;
        top: 10px;
        @include modifier(shingles) {
            &:before {
                content: "\e600";
            }
        }
    }
}
